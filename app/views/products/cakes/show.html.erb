<% content_for :page_title, render("shared/page_title", 
  subtitle: "View cake details.",
  actions: render("shared/print_qr_button", qr_code_path: qr_code_products_cake_path(@cake))
) %>

<%= render "shared/sidebar_layout/layout",
    tabs: ["details", "library_samples", "qnc_check_requests", "data_files", "comments", "use_records"],
    tab_path: :products_cake_path,
    path_args: [@cake],
    bottom_action: render("shared/edit_button", label: "Edit Cake", path: edit_products_cake_path(@cake)) do %>

  <% 
    tab_name = params[:tab] || "details"
    tab_name = "library_samples" if tab_name == "sample_library"
  %>

  <%= render tab_name, cake: @cake %>

<% end %>

<!-- View File Data Modal (for QNC check requests) -->
<% if params[:tab] == "qnc_check_requests" %>
  <%= render "shared/qnc_check_file_data_modal" %>
<% end %>

