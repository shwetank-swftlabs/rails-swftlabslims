<% content_for :page_title, render("shared/page_title", subtitle: "Add a new cake to the products.") %>

<%= render "shared/form_errors", object: @cake %>

<%= form_with(model: @cake, local: false, url: products_cakes_path, html: { class: "cake-form" }) do |f| %>
  
  <%= default_form_field(f, :name, label_text: "Cake Name (unique)", required: true) do |req| %>
    <%= f.text_field :name,
                    { class: "form-control",
                      placeholder: "Please enter a unique cake name" }.merge(req) %>
  <% end %>

  <%= inline_quantity_field(f, :quantity, "Quantity", unit_field: :unit, unit_options: Products::Cake::CAKE_UNITS, required: true) %>

  <%= default_form_field(f, :moisture_percentage, label_text: "Moisture Percentage", required: true) do |req| %>
    <%= f.number_field :moisture_percentage,
                    { class: "form-control",
                      placeholder: "Enter moisture percentage",
                      step: 0.01,
                      min: 0,
                      max: 100 }.merge(req) %>
  <% end %>

  <%= default_form_field(f, :ph, label_text: "pH", required: true) do |req| %>
    <%= f.number_field :ph,
                    { class: "form-control",
                      placeholder: "Enter pH value",
                      step: 0.01,
                      min: 0 }.merge(req) %>
  <% end %>

  <%= default_form_field(f, :batch_number, label_text: "Batch Number (optional)", required: false) do |req| %>
    <%= f.text_field :batch_number,
                    { class: "form-control",
                      placeholder: "Enter batch number from NOP process (optional)" } %>
  <% end %>

  <!-- Larger space before buttons -->
  <div class="mt-4">
    <!-- CONFIRM SUBMIT -->
    <%= f.submit "Save Cake", 
          class: "btn btn-primary px-4 mt-5",
          data: { turbo_confirm: "Are you sure you want to save this cake?" } %>
  </div>

<% end %>

