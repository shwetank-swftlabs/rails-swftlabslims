<% content_for :page_title, render("shared/page_title",
  subtitle: "Manage QNC checks.",
  actions: render("shared/add_button", label: "Add QNC Check", path: new_admin_qnc_checks_config_path(resource_class: @selected_resource_class))
) %>

<div class="d-flex justify-content-between align-items-center mb-3">
  <div class="d-flex align-items-center gap-2">
    <label class="form-label mb-0 fw-semibold" for="qnc-config-resource-class">
      Resource:
    </label>
    <%= form_with url: admin_qnc_checks_configs_path, method: :get, local: true, html: { class: "d-flex align-items-center gap-2" } do |f| %>
      <%= f.select :resource_class,
                   options_for_select(@resource_classes.map { |resource_class| [resource_class_to_name(resource_class), resource_class] }, resource_class_to_name(@selected_resource_class)),
                   {},
                   { id: "qnc-config-resource-class", class: "form-select form-select-sm", onchange: "this.form.submit();" } %>
      <%# keep any other query params if needed in the future %>
    <% end %>
  </div>
</div>

<!-- QNC CHECKS CONFIGS TABLE -->
<%= render "shared/tables/default_table",
      collection: @qnc_checks_configs,
      pagy: nil,
      headers: ->(_) do %>
        <th>Name</th>
        <th>Resource</th>
        <th>Status</th>
        <th>Actions</th>
      <% end,
      row: ->(config) do %>
        <td class="fw-semibold"><%= config.name %></td>
        <td><%= resource_class_to_name(config.resource_class) %></td>
        <td>
          <% if config.is_active? %>
            <span class="badge bg-success">
              <i class="bi bi-check-circle me-1"></i>Active
            </span>
          <% else %>
            <span class="badge bg-danger">
              <i class="bi bi-x-circle me-1"></i>Inactive
            </span>
          <% end %>
        </td>
        <td>
          <%= render "shared/edit_button",
                     label: "Edit",
                     path: edit_admin_qnc_checks_config_path(config, resource_class: @selected_resource_class),
                     size: "sm" %>
        </td>
      <% end %>


